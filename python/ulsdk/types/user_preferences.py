# Copyright (c), CommunityLogiq Software
# 
# THIS FILE IS AUTOGENERATED, DO NOT EDIT

from dataclasses import dataclass
from enum import Enum
from flatbuffers.table import Table
from flatbuffers.builder import Builder
from flatbuffers.util import RemoveSizePrefix
from typing import Union, List, Optional, Self, Tuple
from .Schema import (
    Binary,
    Bool,
    Buffer,
    Date,
    DateUnit,
    Decimal,
    DictionaryEncoding,
    DictionaryKind,
    Duration,
    Endianness,
    Feature,
    Field,
    FixedSizeBinary,
    FixedSizeList,
    FloatingPoint,
    Int,
    Interval,
    IntervalUnit,
    KeyValue,
    LargeBinary,
    LargeList,
    LargeUtf8,
    List_,
    Map,
    MetadataVersion,
    Null,
    Precision,
    Schema,
    Struct_,
    Time,
    TimeUnit,
    Timestamp,
    Type,
    Union_,
    UnionMode,
    Utf8,
)
from .api import SortOrder
from .entity import (
    EdgeTy,
    EntityTy,
    Geometry,
    GraphEdge,
    GraphNode,
    Line,
    MultiLine,
    MultiPolygon,
    NodeTy,
    Point,
    Polygon,
)
from .fun import Fn
from .graph import (
    EdgeList,
    EdgeQuery,
    Geom,
    GeomOp,
    GraphQuery,
    NodeIdPair,
    NodeList,
    NodeQuery,
    OrderBy,
    Predicate,
    Projection,
    QueryPathElement,
    QueryPathElementUnion,
    ValueTransform,
)
from .id import (
    B2cId,
    ColumnGroupId,
    ContentId,
    DataStateId,
    GenericId,
    GraphNodeId,
    ObjectId,
    ObjectNamespace,
    StreamId,
)
from .query import (
    AllColumns,
    Arrow,
    BinaryQueryElement,
    Case,
    Column,
    DataCatalog,
    DeleteQueryElement,
    Distinct,
    Expr,
    ExprUnion,
    Function,
    Join,
    JoinTy,
    MvdbSubcollection,
    NullableUint,
    OrderByExpr,
    Parameter,
    ParameterInstance,
    ParameterSlot,
    ParameterizedQuery,
    Partition,
    Query,
    QueryElement,
    QueryElementOp,
    QueryElementUnion,
    QueryTableSource,
    RecordBatchPlaceholder,
    SetExpr,
    Subcollection,
    TableOrderBy,
    TableSource,
    TableSourceUnion,
    TypeHint,
    UnaryQueryElement,
    UnsetArgument,
    UpdateQueryElement,
    ValueIndex,
    Vector,
    When,
    Window,
    WorklogSubcollection,
)
from .usecase import (
    UseCase,
    UseCaseInput,
    UseCaseInputPair,
    UseCaseModule,
    UseCaseTy,
)
from .value import (
    Point2D,
    Tri2D,
    VArray,
    VBool,
    VBytes,
    VChar,
    VF32,
    VF64,
    VFixedSizeBytes,
    VI16,
    VI32,
    VI64,
    VI8,
    VIsize,
    VNull,
    VStr,
    VTimestampMs,
    VTimestampMsUtc,
    VTimestampNs,
    VTimestampNsUtc,
    VTri2D,
    VU16,
    VU32,
    VU64,
    VU8,
    VUnit,
    VUsize,
    Value,
    ValueInstance,
    ValueTy,
)
from .generated.AllColumns import AllColumns as FbsAllColumns
from .generated.Arrow import Arrow as FbsArrow
from .generated.B2cId import B2cId as FbsB2cId
from .generated.Binary import Binary as FbsBinary
from .generated.BinaryQueryElement import BinaryQueryElement as FbsBinaryQueryElement
from .generated.Bool import Bool as FbsBool
from .generated.Buffer import Buffer as FbsBuffer
from .generated.Case import Case as FbsCase
from .generated.Column import Column as FbsColumn
from .generated.ColumnGroupId import ColumnGroupId as FbsColumnGroupId
from .generated.ContentId import ContentId as FbsContentId
from .generated.DataCatalog import DataCatalog as FbsDataCatalog
from .generated.DataStateId import DataStateId as FbsDataStateId
from .generated.Date import Date as FbsDate
from .generated.Decimal import Decimal as FbsDecimal
from .generated.DeleteQueryElement import DeleteQueryElement as FbsDeleteQueryElement
from .generated.DictionaryEncoding import DictionaryEncoding as FbsDictionaryEncoding
from .generated.Distinct import Distinct as FbsDistinct
from .generated.Duration import Duration as FbsDuration
from .generated.EdgeList import EdgeList as FbsEdgeList
from .generated.EdgeQuery import EdgeQuery as FbsEdgeQuery
from .generated.Expr import Expr as FbsExpr
from .generated.Field import Field as FbsField
from .generated.FixedSizeBinary import FixedSizeBinary as FbsFixedSizeBinary
from .generated.FixedSizeList import FixedSizeList as FbsFixedSizeList
from .generated.FloatingPoint import FloatingPoint as FbsFloatingPoint
from .generated.Function import Function as FbsFunction
from .generated.GenericId import GenericId as FbsGenericId
from .generated.Geom import Geom as FbsGeom
from .generated.GeomOp import GeomOp as FbsGeomOp
from .generated.GraphEdge import GraphEdge as FbsGraphEdge
from .generated.GraphNode import GraphNode as FbsGraphNode
from .generated.GraphNodeId import GraphNodeId as FbsGraphNodeId
from .generated.GraphQuery import GraphQuery as FbsGraphQuery
from .generated.Int import Int as FbsInt
from .generated.Interval import Interval as FbsInterval
from .generated.Join import Join as FbsJoin
from .generated.KeyValue import KeyValue as FbsKeyValue
from .generated.LargeBinary import LargeBinary as FbsLargeBinary
from .generated.LargeList import LargeList as FbsLargeList
from .generated.LargeUtf8 import LargeUtf8 as FbsLargeUtf8
from .generated.Line import Line as FbsLine
from .generated.List import List as FbsList
from .generated.Map import Map as FbsMap
from .generated.MultiLine import MultiLine as FbsMultiLine
from .generated.MultiPolygon import MultiPolygon as FbsMultiPolygon
from .generated.MvdbSubcollection import MvdbSubcollection as FbsMvdbSubcollection
from .generated.NodeIdPair import NodeIdPair as FbsNodeIdPair
from .generated.NodeList import NodeList as FbsNodeList
from .generated.NodeQuery import NodeQuery as FbsNodeQuery
from .generated.Null import Null as FbsNull
from .generated.NullableUint import NullableUint as FbsNullableUint
from .generated.ObjectId import ObjectId as FbsObjectId
from .generated.OrderBy import OrderBy as FbsOrderBy
from .generated.OrderByExpr import OrderByExpr as FbsOrderByExpr
from .generated.Parameter import Parameter as FbsParameter
from .generated.ParameterInstance import ParameterInstance as FbsParameterInstance
from .generated.ParameterizedQuery import ParameterizedQuery as FbsParameterizedQuery
from .generated.Partition import Partition as FbsPartition
from .generated.Point import Point as FbsPoint
from .generated.Point2D import Point2D as FbsPoint2D
from .generated.Polygon import Polygon as FbsPolygon
from .generated.Projection import Projection as FbsProjection
from .generated.Query import Query as FbsQuery
from .generated.QueryElement import QueryElement as FbsQueryElement
from .generated.QueryPathElement import QueryPathElement as FbsQueryPathElement
from .generated.QueryTableSource import QueryTableSource as FbsQueryTableSource
from .generated.RecordBatchPlaceholder import RecordBatchPlaceholder as FbsRecordBatchPlaceholder
from .generated.Schema import Schema as FbsSchema
from .generated.SetExpr import SetExpr as FbsSetExpr
from .generated.StreamId import StreamId as FbsStreamId
from .generated.Struct_ import Struct_ as FbsStruct_
from .generated.TableOrderBy import TableOrderBy as FbsTableOrderBy
from .generated.TableSource import TableSource as FbsTableSource
from .generated.Time import Time as FbsTime
from .generated.Timestamp import Timestamp as FbsTimestamp
from .generated.Tri2D import Tri2D as FbsTri2D
from .generated.UnaryQueryElement import UnaryQueryElement as FbsUnaryQueryElement
from .generated.Union import Union as FbsUnion
from .generated.UnsetArgument import UnsetArgument as FbsUnsetArgument
from .generated.UpdateQueryElement import UpdateQueryElement as FbsUpdateQueryElement
from .generated.UseCase import UseCase as FbsUseCase
from .generated.UseCaseInputPair import UseCaseInputPair as FbsUseCaseInputPair
from .generated.UserPreferences import UserPreferences as FbsUserPreferences
from .generated.Utf8 import Utf8 as FbsUtf8
from .generated.VArray import VArray as FbsVArray
from .generated.VBool import VBool as FbsVBool
from .generated.VBytes import VBytes as FbsVBytes
from .generated.VChar import VChar as FbsVChar
from .generated.VF32 import VF32 as FbsVF32
from .generated.VF64 import VF64 as FbsVF64
from .generated.VFixedSizeBytes import VFixedSizeBytes as FbsVFixedSizeBytes
from .generated.VI16 import VI16 as FbsVI16
from .generated.VI32 import VI32 as FbsVI32
from .generated.VI64 import VI64 as FbsVI64
from .generated.VI8 import VI8 as FbsVI8
from .generated.VIsize import VIsize as FbsVIsize
from .generated.VNull import VNull as FbsVNull
from .generated.VStr import VStr as FbsVStr
from .generated.VTimestampMs import VTimestampMs as FbsVTimestampMs
from .generated.VTimestampMsUtc import VTimestampMsUtc as FbsVTimestampMsUtc
from .generated.VTimestampNs import VTimestampNs as FbsVTimestampNs
from .generated.VTimestampNsUtc import VTimestampNsUtc as FbsVTimestampNsUtc
from .generated.VTri2D import VTri2D as FbsVTri2D
from .generated.VU16 import VU16 as FbsVU16
from .generated.VU32 import VU32 as FbsVU32
from .generated.VU64 import VU64 as FbsVU64
from .generated.VU8 import VU8 as FbsVU8
from .generated.VUnit import VUnit as FbsVUnit
from .generated.VUsize import VUsize as FbsVUsize
from .generated.ValueIndex import ValueIndex as FbsValueIndex
from .generated.ValueInstance import ValueInstance as FbsValueInstance
from .generated.Vector import Vector as FbsVector
from .generated.When import When as FbsWhen
from .generated.Window import Window as FbsWindow
from .generated.WorklogSubcollection import WorklogSubcollection as FbsWorklogSubcollection
from .generated.ExprUnion import ExprUnion as FbsExprUnion
from .generated.Geometry import Geometry as FbsGeometry
from .generated.ParameterSlot import ParameterSlot as FbsParameterSlot
from .generated.QueryElementUnion import QueryElementUnion as FbsQueryElementUnion
from .generated.QueryPathElementUnion import QueryPathElementUnion as FbsQueryPathElementUnion
from .generated.Subcollection import Subcollection as FbsSubcollection
from .generated.TableSourceUnion import TableSourceUnion as FbsTableSourceUnion
from .generated.Type import Type as FbsType
from .generated.UseCaseInput import UseCaseInput as FbsUseCaseInput
from .generated.Value import Value as FbsValue

class Units(Enum):
    Invalid = 0
    Metric = 1
    Imperial = 2


@dataclass
class UserPreferences:
    center: Optional["Point"]

    defaultAreaReportTemplate: Optional["ObjectId"]

    homepage_usecase_id: Optional["ObjectId"]

    timezone: Optional["str"]

    units: "Units"

    zoom: "float"

    @classmethod
    def from_fbs(cls, o: FbsUserPreferences) -> Self:
        center = None
        center_obj = o.Center()
        if center_obj is not None:
            center = Point.from_fbs(center_obj)
        defaultAreaReportTemplate = None
        defaultAreaReportTemplate_obj = o.DefaultAreaReportTemplate()
        if defaultAreaReportTemplate_obj is not None:
            defaultAreaReportTemplate = ObjectId.from_fbs(defaultAreaReportTemplate_obj)
        homepage_usecase_id = None
        homepage_usecase_id_obj = o.HomepageUsecaseId()
        if homepage_usecase_id_obj is not None:
            homepage_usecase_id = ObjectId.from_fbs(homepage_usecase_id_obj)
        timezone = None
        timezone_str = o.Timezone()
        if timezone_str is not None:
            timezone = timezone_str.decode('utf-8')
        units = Units(o.Units())
        zoom = o.Zoom()
        return cls(center, defaultAreaReportTemplate, homepage_usecase_id, timezone, units, zoom)

    @classmethod
    def from_bytes(cls, data: bytes) -> Self:
        deprefixed = RemoveSizePrefix(data, 0)
        o = FbsUserPreferences.GetRootAs(deprefixed[0], deprefixed[1])
        return cls.from_fbs(o)

    def serialize_to(self, builder: Builder) -> int:
        from .generated.UserPreferences import (
            Start,
            AddCenter,
            AddDefaultAreaReportTemplate,
            AddHomepageUsecaseId,
            AddTimezone,
            AddUnits,
            AddZoom,
            End,
        )
        center_offset = None
        if self.center is not None:
            center_offset = self.center.serialize_to(builder)
        defaultAreaReportTemplate_offset = None
        if self.defaultAreaReportTemplate is not None:
            defaultAreaReportTemplate_offset = self.defaultAreaReportTemplate.serialize_to(builder)
        homepage_usecase_id_offset = None
        if self.homepage_usecase_id is not None:
            homepage_usecase_id_offset = self.homepage_usecase_id.serialize_to(builder)
        timezone_offset = None
        if self.timezone is not None:
            timezone_offset = builder.CreateString(self.timezone)
        
        Start(builder)
        if center_offset is not None:
            AddCenter(builder, center_offset)
        if defaultAreaReportTemplate_offset is not None:
            AddDefaultAreaReportTemplate(builder, defaultAreaReportTemplate_offset)
        if homepage_usecase_id_offset is not None:
            AddHomepageUsecaseId(builder, homepage_usecase_id_offset)
        if timezone_offset is not None:
            AddTimezone(builder, timezone_offset)
        AddUnits(builder, self.units.value)
        AddZoom(builder, self.zoom)
        return End(builder)

    def to_bytes(self) -> bytes:
        builder = Builder(0)
        offset = self.serialize_to(builder)
        builder.FinishSizePrefixed(offset)
        return builder.Output()

    @classmethod
    def make_default(cls) -> Self:
        center = Point.make_default()
        defaultAreaReportTemplate = ObjectId.make_default()
        homepage_usecase_id = ObjectId.make_default()
        timezone = ""
        units = Units(0)
        zoom = 0.0
        return cls(center, defaultAreaReportTemplate, homepage_usecase_id, timezone, units, zoom)

    def __eq__(self, other) -> bool:
        eq = True
        eq = eq and self.center == other.center
        eq = eq and self.defaultAreaReportTemplate == other.defaultAreaReportTemplate
        eq = eq and self.homepage_usecase_id == other.homepage_usecase_id
        eq = eq and self.timezone == other.timezone
        eq = eq and self.units == other.units
        eq = eq and self.zoom == other.zoom

        return eq
